{
  "raw": "<entry>\n  <author>\n    <name>YT Kuah</name>\n    <uri>https://www.blogger.com/profile/12922664246915351758</uri>\n    <email>noreply@blogger.com</email>\n  </author>\n  <category term=\"technology\"\n    scheme=\"http://www.blogger.com/atom/ns#\"/>\n  <category term=\"rspec\"\n    scheme=\"http://www.blogger.com/atom/ns#\"/>\n  <category term=\"http://schemas.google.com/blogger/2008/kind#post\"\n    scheme=\"http://schemas.google.com/g/2005#kind\"/>\n  <category term=\"rails\"\n    scheme=\"http://www.blogger.com/atom/ns#\"/>\n  <category term=\"scripting\"\n    scheme=\"http://www.blogger.com/atom/ns#\"/>\n  <category term=\"bash\"\n    scheme=\"http://www.blogger.com/atom/ns#\"/>\n  <content type=\"html\">I have a problem where a project is using an older version of RSpec (currently the lastest version is RSpec 1.3.0). Therefore running&lt;br /&gt;&lt;blockquote&gt;spec spec/model/some_model_spec.rb&lt;/blockquote&gt;gives me an error&lt;br /&gt;&lt;blockquote&gt;/spec/models/../spec_helper.rb:23: undefined method `use_transactional_fixtures='&lt;/blockquote&gt;The solution would be to use the older, vendored spec. Now, the spec binary that is installed as part of the gem installation should do this (some gems do checked for vendor'ed binaries) and my rspec is installed under vendor/plugins, not vendor/gems. Therefore, &amp;nbsp;I use some bash trickery to dynamically redefine the &quot;&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family: 'Courier New', Courier, monospace;&quot;&gt;spec&lt;/span&gt;&quot; command. Put the code below in .bashrc :&lt;br /&gt;&lt;pre&gt;&lt;code&gt;&lt;br /&gt;vendored_or_path_spec() {&lt;br /&gt;  if [ -x vendor/plugins/rspec/bin/spec ];&lt;br /&gt;  then &lt;br /&gt;    echo 'vendor/plugins/rspec/bin/spec';&lt;br /&gt;  else&lt;br /&gt;    echo '*spec';&lt;br /&gt;  fi&lt;br /&gt;}&lt;br /&gt;alias spec='$(vendored_or_path_spec) $@'&lt;/code&gt;&lt;/pre&gt;&lt;br /&gt;&lt;br /&gt;Some explanations. The hardest thing to figure out was how to dynamically alias something. After such scrumbling and asking on vark.com, I managed to find &lt;a href=&quot;https://secure.wikimedia.org/wikipedia/en/wiki/Command_substitution&quot;&gt;command substitutions&lt;/a&gt;, which is the $(command) part. Combining that with $@ for all arguments meant that I can run any command in the alias. &lt;br /&gt;&lt;br /&gt;Because I'm aliasing spec, I use *spec to refer to the original un-aliased spec.&lt;br /&gt;&lt;br /&gt;That's it!</content>\n  <id>tag:blogger.com,1999:blog-12015963.post-2553421279819125599</id>\n  <link href=\"http://blog.kuahyeow.com/feeds/2553421279819125599/comments/default\"\n    rel=\"replies\"\n    type=\"application/atom+xml\"\n    title=\"Post Comments\"/>\n  <link href=\"https://www.blogger.com/comment.g?blogID=12015963&amp;postID=2553421279819125599\"\n    rel=\"replies\"\n    type=\"text/html\"\n    title=\"0 Comments\"/>\n  <link href=\"https://www.blogger.com/feeds/12015963/posts/default/2553421279819125599\"\n    rel=\"edit\"\n    type=\"application/atom+xml\"/>\n  <link href=\"https://www.blogger.com/feeds/12015963/posts/default/2553421279819125599\"\n    rel=\"self\"\n    type=\"application/atom+xml\"/>\n  <link href=\"http://blog.kuahyeow.com/2010/06/bash-hackery-to-get-around-old-rspec.html\"\n    rel=\"alternate\"\n    type=\"text/html\"\n    title=\"Bash hackery to get around old rspec\"/>\n  <published>2010-06-18T15:07:00+12:00</published>\n  <title type=\"text\">Bash hackery to get around old rspec</title>\n  <updated>2010-06-18T15:07:59.262+12:00</updated>\n</entry>",
  "slug": "bash-hackery-to-get-around-old-rspec",
  "title": "Bash hackery to get around old rspec",
  "author": "YT Kuah",
  "date": "2010-06-18T15:07:00+12:00",
  "tags": [
    "technology",
    "rspec",
    "rails",
    "scripting",
    "bash"
  ]
}

I have a problem where a project is using an older version of RSpec (currently the lastest version is RSpec 1.3.0). Therefore running<br /><blockquote>spec spec/model/some_model_spec.rb</blockquote>gives me an error<br /><blockquote>/spec/models/../spec_helper.rb:23: undefined method `use_transactional_fixtures='</blockquote>The solution would be to use the older, vendored spec. Now, the spec binary that is installed as part of the gem installation should do this (some gems do checked for vendor'ed binaries) and my rspec is installed under vendor/plugins, not vendor/gems. Therefore, &nbsp;I use some bash trickery to dynamically redefine the "<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">spec</span>" command. Put the code below in .bashrc :<br /><pre><code><br />vendored_or_path_spec() {<br />  if [ -x vendor/plugins/rspec/bin/spec ];<br />  then <br />    echo 'vendor/plugins/rspec/bin/spec';<br />  else<br />    echo '*spec';<br />  fi<br />}<br />alias spec='$(vendored_or_path_spec) $@'</code></pre><br /><br />Some explanations. The hardest thing to figure out was how to dynamically alias something. After such scrumbling and asking on vark.com, I managed to find <a href="https://secure.wikimedia.org/wikipedia/en/wiki/Command_substitution">command substitutions</a>, which is the $(command) part. Combining that with $@ for all arguments meant that I can run any command in the alias. <br /><br />Because I'm aliasing spec, I use *spec to refer to the original un-aliased spec.<br /><br />That's it!